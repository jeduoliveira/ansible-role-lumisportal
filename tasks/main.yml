---

- name: created OS group lumis
  group:
    name: "{{ lumis_group }}"
    state: present
  tags:
    - lumisportal
    - bootstrap

- name: created OS user lumis
  user:
    name: "{{ lumis_user }}"
    state: present
    group: "{{ lumis_group }}"
    createhome: no
    system: yes
  tags:
    - lumisportal
    - bootstrap

- name: defined variable lumis version
  set_fact:
    lumis_version: "{{ __lumis_version }}"
  when: lumis_version is not defined
  tags:
    - lumisportal
    - bootstrap

- name: defined variable lumis release
  set_fact:
    lumis_release: "{{ __lumis_release }}"
  when: lumis_release is not defined
  tags:
    - lumisportal
    - bootstrap

- name: install if Redhat OS
  yum:
    name: "{{ packages }}"
    state: present
  when: ansible_os_family == 'RedHat'
  tags:
    - lumisportal
    - bootstrap

- include_tasks: install.yml
  tags:
    - lumisportal
    - bootstrap
